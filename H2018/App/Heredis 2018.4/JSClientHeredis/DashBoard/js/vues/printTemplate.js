function Print(){var controller,window="";this.init=function(c){controller=c,c.getFilename()},this.printPdf=function(type,HTMLcontenu,index){applyTemplateToData(type,HTMLcontenu,'<div class="k-block" id="widgetSpe" style="width:615px;height:590px;overflow:auto"></div>');var titre=$(HTMLcontenu).find(".entete .titre").html();if($("#widgetSpe").find(".heredis-button").hide(),"detaille"===type)$("#vue").css("font-family","DejaVu Sans , DejaVu Sans|Italic, DejaVu Sans|Bold|Italic"),$("#apercu").find("#png").hide(),$("#apercu").find("#pdf").click(function(event){isModeDemo(controller.getIdFile(),controller.getPort(),function(exportPath,encodedFilename){encodedFilename,$("#widgetSpe").css({width:"510px"});var pgLabel=".page-break";pgLabel="infosFichiers"===controller.getPage()?".page-break":"none",kendo.drawing.drawDOM($("#apercu").find("#vue"),{forcePageBreak:pgLabel,paperSize:[560,610],margin:2}).then(function(group){kendo.drawing.pdf.saveAs(group,exportPath+encodedFilename+" - "+titre.toLowerCase()+".pdf","http://127.0.0.1:"+controller.getPort()+"/libheredis/appServicesDown/download",function(){window.data("kendoWindow").close()})})})});else if("simple"===type){kendo.ui.progress($(HTMLcontenu),!1),$(HTMLcontenu).css("font-family","DejaVu Sans , DejaVu Sans|Italic, DejaVu Sans|Bold|Italic"),$(HTMLcontenu).find(".heredis-button").hide(),$(HTMLcontenu).find(".ouvrirDico").hide();var recovTitle=$(HTMLcontenu).find(".entete span").html();$(HTMLcontenu).find(".entete span").append("</br> ("+$("#titre").html()+") "),$(HTMLcontenu).find(".entete").css("height","40px");var surface,hauteurCanvas="500";$(HTMLcontenu).parent().hasClass("bigWidget")&&(hauteurCanvas="650",$(HTMLcontenu).parent().css({width:"372px",height:"620px","margin-bottom":"40px"}),$(HTMLcontenu).find(".contenu > div > div >div").css({display:"block",margin:"auto",width:"90%"}),$(HTMLcontenu).find(".miniature").data("kendoChart").resize()),kendo.drawing.drawDOM($(HTMLcontenu)).then(function(group){$("#apercu").find("#vue").css({height:hauteurCanvas,display:"block","margin-left":"50px"}),$("#apercu").find("#vue").css("width","372"),(surface=kendo.drawing.Surface.create($("#vue"),{type:"canvas"})).draw(group),surface.resize(),$(HTMLcontenu).find(".entete span").html(recovTitle),$(HTMLcontenu).find(".entete").css("height","30px")}),$("#apercu").find("#pdf").click(function(event){isModeDemo(controller.getIdFile(),controller.getPort(),function(folderPath,encodedFilename){encodedFilename,kendo.drawing.drawDOM($("#vue")).then(function(group){kendo.drawing.pdf.saveAs(group,folderPath+encodedFilename+" - "+titre.toLowerCase()+".pdf","http://127.0.0.1:"+controller.getPort()+"/libheredis/appServicesDown/download",function(){})})})}),$("#apercu").find("#png").click(function(event){isModeDemo(controller.getIdFile(),controller.getPort(),function(folderPath,encodedFilename){encodedFilename,kendo.drawing.drawDOM($(HTMLcontenu)).then(function(group){return kendo.drawing.exportImage(group)}).done(function(data){kendo.saveAs({dataURI:data,fileName:folderPath+encodedFilename+" - "+titre.toLowerCase()+".png",proxyURL:"http://127.0.0.1:"+controller.getPort()+"/libheredis/appServicesDown/download"})})})})}};var applyTemplateToData=function(type,HTMLcontenu,template,callback){$("#apercu").html('<div style="width:560px;height:610px;display:block;margin-left:20px" id="vue">'+template+'</div><div id="typeExport" style="display:block" ><button class="k-button" id="pdf">'+localisedString.HNLOC_DASH_BUTTON_EXPORT_PDF_LABEL+'</button><button class="k-button" id="png">'+localisedString.HNLOC_DASH_BUTTON_EXPORT_PNG_LABEL+"</button></div>"),$("#apercu").find("#vue > #widgetSpe").append($(HTMLcontenu).find(".entete").clone()),$("#apercu").find("#vue > #widgetSpe").find(".entete span").append("<br/>("+$("#titre").html()+") "),$("#apercu").find("#vue > #widgetSpe").append($(HTMLcontenu).find(".contenu").clone());var widthInit="";$("#apercu").css("text-align","center"),(window=$("#apercu")).kendoWindow({title:localisedString.HNLOC_EXPORT_WINDOW_TITLE,modal:!0,close:function(){"simple"===type&&controller.refresh()},activate:function(){prepareEltForApercu(type,HTMLcontenu),"detaille"===type&&controller.refresh()}}).data("kendoWindow"),"simple"===type?widthInit="500px":"detaille"===type&&(widthInit="600px"),window.data("kendoWindow").setOptions({width:widthInit,maxWidth:widthInit,minWidth:widthInit}),window.data("kendoWindow").center(),window.data("kendoWindow").open()},prepareEltForApercu=function(type,htmlContenu){if("detaille"===type){kendo.ui.progress($(htmlContenu),!1),$("#widgetSpe").css({width:"516px"}),0!==$(htmlContenu).find(".optionsGraph").length&&($("#widgetSpe > .contenu > .stats").html('<div class="stats"></div>'),void 0!==$(htmlContenu).find(".optionsGraph > .sexe > .optionsGraphSelect .k-input").html()&&$("#widgetSpe > .contenu > .stats >.stats").append('<div class="k-shadow"><div class="label">Genre : </div><span class="statsValue">'+$(htmlContenu).find(".optionsGraph > .sexe > .optionsGraphSelect .k-input").html()+"</span></div>"),void 0!==$(htmlContenu).find(".optionsGraph >.formatDate >.optionsGraphSelect .k-input").html()&&$("#widgetSpe > .contenu > .stats >.stats").append('<div class="k-shadow"><div class="label">Mode d\'affichage : </div><span class="statsValue">'+$(htmlContenu).find(".optionsGraph >.formatDate >.optionsGraphSelect .k-input").html()+"</span></div>"),void 0!==$(htmlContenu).find(".optionsGraph > .intervalDate > .optionsGraphSelect .k-input").html()&&$("#widgetSpe > .contenu > .stats >.stats").append('<div class="k-shadow"><div class="label">Intervalle d\'analyse : </div><span class="statsValue">'+$(htmlContenu).find(".optionsGraph > .intervalDate > .optionsGraphSelect .k-input").html()+"</span></div>")),$("#widgetSpe > .contenu > .stats > .stats > div").css({"min-width":"110px",display:"inline-block"}),$("#widgetSpe").css("font-family","DejaVu Sans , DejaVu Sans|Italic, DejaVu Sans|Bold, DejaVu Sans|Bold|Italic"),$("#widgetSpe").find(".optionsGraph").remove();var tmp=$(htmlContenu).find(".contenu > ul > li"),widgetSpeTmp=$("#widgetSpe > .contenu > ul >li");$("#widgetSpe .tableauDetail >li >ul >li").css("font-size","9px"),$("#widgetSpe > .contenu > ul >li").each(function(indexLi){if(0!==$(tmp[indexLi]).find(".defautViewKendo").length)$(widgetSpeTmp[indexLi]).remove();else if(0!==$(tmp[indexLi]).find(" > div").length&&(void 0!==$(tmp[indexLi]).find(" > div").data("kendoChart")||null===$(tmp[indexLi]).find(" > div").data("kendoChart")?(indexLi>0&&void 0===$(tmp[indexLi-1]).find(" > div").data("kendoChart")&&"stats"===controller.getPage()&&$(this).css("margin-top","30px"),$(this).kendoChart($(tmp[indexLi]).find(" > div").data("kendoChart").options),$(this).css({"min-height":"275px"}),$(this).data("kendoChart").options.chartArea.width=492,$(this).data("kendoChart").options.chartArea.height=250,$(this).data("kendoChart").options.categoryAxis.categories=$(tmp[indexLi]).find(" > div").data("kendoChart").options.categoryAxis.categories,$(this).data("kendoChart").options.categoryAxis.labels.rotation="90",void 0!==$(this).data("kendoChart").options.series[0].holeSize&&($(this).data("kendoChart").options.series[0].holeSize=23),$(this).data("kendoChart").resize(!0)):($(this).find(".tableauDetail").removeClass("page-break"),indexLi>0&&$(this).toggleClass("page-break"),$(this).css("width","492px"),$(this).find(".SplusDetailSection .k-header,  .SplusDetailDefaultMsg .k-header ").css("background-position-y","8px"),$(this).find(".SplusDetailSection .k-header,  .SplusDetailDefaultMsg .k-header ").css("background-position-x","90%"),$("#widgetSpe .saveLink, #widgetSpe .publishLink").css("padding","2px"),$("#widgetSpe .saveLink, #widgetSpe .publishLink").attr("disabled","disabled")),0!==$(tmp[indexLi]).find("> div").length&&void 0!==$(tmp[indexLi]).find("> div").data("kendoGrid"))){$(this).find(" > div").kendoGrid($(tmp[indexLi]).find("div").data("kendoGrid").options);var max=500;$(this).find(" > div").data("kendoGrid").dataSource.total()<500&&(max=$(this).find(" > div").data("kendoGrid").dataSource.total()),$(this).find(" > div").data("kendoGrid").dataSource.pageSize(max),$(this).find(" > div #exportEXCEL").css("display","none"),$(this).find("> div .k-grid-pager").hide(),$(this).find(" > div").data("kendoGrid").refresh(),$(this).find(" > div").data("kendoGrid").dataSource.total()>13&&$(this).find(" > div").data("kendoGrid").dataSource.total()<23&&$(this).toggleClass("page-break"),$(this).find(".tableauStats").css("height",""),$(this).find(".tableauStats").css("min-height",""),$(this).find(".tableauStats .k-grid-content").css("height",""),$(this).find("> div").css("width","492px")}})}}}